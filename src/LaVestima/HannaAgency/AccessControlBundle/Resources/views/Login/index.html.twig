{% extends '@Infrastructure/base.html.twig' %}

{% block title %}Log in{% endblock %}

{% block actionBar %}
    <a href="{{ path('access_control_register') }}">
        <div class="button action-bar-button">
            Register
        </div>
    </a>
    <a href="{{ path('access_control_forgot_password') }}">
        <div class="button action-bar-button">
            Forgot Password
        </div>
    </a>
{% endblock %}

{% block content %}
    {% if not app.user %}
    <form action="{{ path('access_control_login') }}" method="POST">
        {% if error %}
            <span style="color:red">{{ error.message }}</span>
        {% endif %}
        <table class="user-input-table">
            <tr>
                <td>
                    <label for="username">Username:</label>
                </td>
                <td>
                    <input type="text" id="username" name="_username" required value="{{ last_username }}" autofocus />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="password">Password:</label>
                </td>
                <td>
                    <input type="password" id="password" name="_password" required />
                </td>
            </tr>
            <tr>
                <td>
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
                </td>
                <td>
                    <button type="submit">Log in</button>
                </td>
            </tr>
        </table>
    </form>
    {% else %}
        User already logged in.
    {% endif %}
{% endblock %}
