{% extends '@Infrastructure/base.html.twig' %}

{% set isExportAllowed = true %}
{% set pdfExportPath = path('export_pdf_order_list') %}
{% set pdfExportJson = [] %}

{% for order in orders %}
    {% set pdfExportJson = pdfExportJson | merge([order.pathSlug]) %}
{% endfor %}

{% set pdfExportJson = pdfExportJson | json_encode %}

{% block title %}Order list{% endblock %}

{% block actionBar %}
    <a href="{{ path('order_placement_new') }}">
        <div class="button action-bar-button">
            Place order
        </div>
    </a>
    <a href="{{ path('order_new') }}">
        <div class="button action-bar-button">
            New order
        </div>
    </a>
    <a href="{{ path('order_deleted_list') }}">
        <div class="button action-bar-button">
            Deleted orders
        </div>
    </a>
{% endblock %}

{% block content %}
    <table class="entity-list order-list">
        <tr>
            <th>Date placed</th>
            <th>Status</th>
            <th>Customer</th>
            <th>User</th>
        </tr>
    {% for order in orders %}
        <tr class="entity-list-row">
            <td>{{ order.datePlaced | date('d.m.Y') }}</td>
            <td>{{ order.status.name }}</td>
            <td>{{ order.idCustomers.fullName }}</td>
            <td>{{ order.userCreated.login }}</td>
            <td class="entity-list-cell">
                <a href="{{ path('order_show', {'pathSlug': order.pathSlug}) }}">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            </td>
        </tr>
    {% endfor %}
    </table>
{% endblock %}