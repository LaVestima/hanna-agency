{% extends 'base.html.twig' %}

{% block title %}{{ producer.shortName }}{% endblock %}

{% block stylesheets %}
    {{ encore_entry_link_tags('producer_show') }}
{% endblock %}

{% block content %}
    <h1>{{ producer.fullName }}</h1>

    <div class="producer-top-bar">
        <div class="producer-top-bar-item active" id="top-bar-homepage" href="#homepage">
            Homepage
        </div>
        <div class="producer-top-bar-item" id="top-bar-products" href="#products">
            Products
        </div>
        <div class="producer-top-bar-item" id="top-bar-opinions" href="#opinions">
            Opinions
        </div>
        <div class="producer-top-bar-item" id="top-bar-contact" href="#contact">
            Contact
        </div>
        {% if editable %}
        <a href="">
            <div class="producer-top-bar-item" id="top-bar-contact" style="color: #cccccc;">
                Edit <i class="fas fa-edit"></i>
            </div>
        </a>
        {% endif %}
    </div>

    <div class="producer-subpage" id="subpage-homepage">
        Customizable frontpage
        <hr>
        {{ producer.frontpageHtml | raw }}
    </div>

    <div class="producer-subpage hidden" id="subpage-products">
        <div class="producer-product-list">
            {% for product in producer.activeProducts %}
                {% include 'Product/parts/_cell.html.twig' with {'product': product} %}
            {% endfor %}
        </div>
    </div>

    <div class="producer-subpage hidden" id="subpage-opinions">
        {% if producer.opinions is empty %}
            No ratings
        {% endif %}

        {% for opinion in producer.opinions %}
            {% for rating in 1..opinion.rating if opinion.rating != 0 %}
                <img src="{{ asset('uploads/images/_star.png') }}" alt="">
            {% endfor %}
            {% for rating in (opinion.rating+1)..5 if opinion.rating != 5 %}
                <img src="{{ asset('uploads/images/_starg.png') }}" alt="">
            {% endfor %}
            {{ opinion.content }}
            <br>
        {% endfor %}
    </div>

    <div class="producer-subpage hidden" id="subpage-contact">
        if producer:
        <i class="fas fa-edit"></i>
        {{ producer.firstName }} {{ producer.lastName }}<br>
        {{ producer.street }}<br>
        {{ producer.postalCode }} {{ producer.city.name }}<br>
        {{ producer.country.name }}<br>
        {{ producer.email | lower }}<br>
        {{ producer.phone }}<br>
        VAT: {{ producer.vat }}<br>
        + MAP?
    </div>
{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('producer_show') }}
{% endblock %}
